"use strict";(()=>{var s="lazyloadOptions"in window?window?.lazyloadOptions:{loading:"lazy-loading",failed:"lazy-failed",on:"lazy",loaded:"lazy-loaded",attribute:"lazy"};"IntersectionObserver"in window&&"MutationObserver"in window&&new MutationObserver(t=>{function c(n,r){for(let i of n){let e=i.target;if(i.boundingClientRect.top<window.innerHeight){if(console.log(e.nodeName,"in viewport"),e.nodeName==="IMG"){e.setAttribute("fetchpriority","high");let d=document.createElement("link");d.setAttribute("rel","preload"),d.setAttribute("as","image"),d.setAttribute("href",e.src),document.head.appendChild(d)}}else e.nodeName!=="DIV"&&(e.dataset[s.attribute]=e.src,e.src="",e.hasAttribute("srcset")&&(e.dataset[s.attribute+"Srcset"]=e.srcset,e.srcset="")),l.observe(e)}a.disconnect()}function o(n,r){n.forEach(i=>{if(i.isIntersecting){let e=i.target;e.classList.add(s.on),e.classList.add(s.loading),e.addEventListener("load",()=>{e.classList.add(s.loaded),e.classList.remove(s.loading)}),e.addEventListener("error",()=>{e.classList.add(s.failed)}),b(e),a.unobserve(e)}})}let a=new IntersectionObserver(c),l=new IntersectionObserver(o);for(let n of t)n.addedNodes.forEach(r=>{r.nodeName==="DIV"&&(r.dataset[s.attribute+"Bkg"]=r.style.backgroundImage,r.style.backgroundImage="")}),n.addedNodes.forEach(r=>{if(r.nodeType===1){a.observe(r);let i=r;n.type==="childList"&&(i.nodeName==="SCRIPT"?i.dataset[s.attribute]&&u(i):["IMG","VIDEO","AUDIO","DIV"].includes(i.nodeName)&&a.observe(i))}})}).observe(document.body,{childList:!0});function b(t){s.attribute+"Bkg"in t.dataset?(t.style.backgroundImage=t.dataset[s.attribute+"Bkg"],t.removeAttribute("data-"+s.attribute+"-bkg")):(t.src=t.dataset[s.attribute],[s.attribute]+"-srcset"in t.dataset&&(t.srcset=t.dataset[s.attribute]+"-srcset",t.removeAttribute("data-"+s.attribute+"-srcset"))),"data-"+s.attribute in t.dataset&&t.removeAttribute("data-"+s.attribute)}function u(t){let c=Number(t.dataset[s.attribute+"Delay"])??0;window.addEventListener("load",()=>{let o=document.createElement("script");for(let a=0;a<t.attributes.length;a++)t.attributes[a].name.includes("data-"+s.attribute)||o.setAttribute(t.attributes[a].name,t.attributes[a].value);o.src=t.dataset[s.attribute],new Promise(a=>setTimeout(a,Number(c))).then(()=>{t.parentElement?.insertBefore(o,t),t.remove()})})}})();
